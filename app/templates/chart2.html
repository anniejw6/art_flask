<!DOCTYPE HTML>
<html>
    
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>flask+d3 Hello World</title>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
        <style>
            dot {
                fill:black;
                stroke:#999999;
            }

            svg {

                display: block;
                margin: 0 auto;
                /*border: dashed;*/
            }
        </style>
    </head>
    
    <body>
        <script>

            var w = 500, h = 450, padding = 20;
            // Create the SVG
            var svg = d3.select("body").append("svg")
                .attr("width", w)
                .attr("height", h)
                .attr("style", "-webkit-tap-highlight-color: #F6F6F6;");

            // Create Axes
            // setup x 
            var xScale = d3.scale.linear().range([padding, w - padding * 2]), // value -> display
                xAxis = d3.svg.axis().scale(xScale).orient("bottom");

            // setup y
            var yScale = d3.scale.linear().range([h - padding, padding]), // value -> display
                yAxis = d3.svg.axis().scale(yScale).orient("left");

            // Add a background
            var rect = svg.append("rect")
                .attr("width", w - padding * 2)
                .attr("height", h - padding * 2)
                .attr("x", padding)
                .attr("y", padding)
                .style("stroke", "#999999")
                .style("fill", "#F6F6F6");


            // X-Axis
            svg.append("g")
                  .attr("class", "x axis")
                  .attr("transform", "translate(0," + h + ")")
                  .call(xAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("x", w/2)
                  .attr("y", 0)
                  .style("text-anchor", "middle")
                  .text("Form");
            // Y-Axis
            svg.append("g")
                  .attr("class", "y axis")
                  .call(yAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("transform", "rotate(-90)")
                  .attr("x", -h/2)
                  .attr("y", padding/2 + 1)
                  //.attr("dy", ".71em")
                  .style("text-anchor", "middle")
                  .text("Content");


            $(function(){

                // var transX;
                // var transY;
                // // add circle on click
                // $("rect").on( "click", function(e) {

                //     var circle = svg.selectAll("circle").remove();

                //     var posX = e.pageX - $(this).offset().left + padding, 
                //         posY = e.pageY - $(this).offset().top + padding;
                //     transX = (posX - padding)/(w - padding * 2);
                //     transY = 1 - (posY - padding)/(h - padding * 2);

                //     // Append a new point
                //     svg.append("circle")
                //         .attr("transform", "translate(" + posX + "," + posY + ")")
                //         .attr("r", "5")
                //         .attr("class", "dot")
                //         .style("cursor", "pointer");
                //     // alert( (transX) + ' , ' + (transY) ); 
                       
                // });

                $('form').submit(function() {
                    // alert( (transX) + ' , ' + (transY) ); 
                    var d = JSON.stringify({title: 'hallo', article: 'test'});
                    alert(d);
                    $.ajax({
                        //data: {"x": transX, "y": transY},
                        type: 'POST',
                        contentType: "application/json; charset=utf-8",
                        url: '/addData',
                        data: d,
                        success: function(data){
                            console.log(data.title);
                            console.log(data.article);
                        },
                        error: function(error){
                            console.log(error);
                        },
                        dataType: "json"
                    });

                      
                });

            });


        </script>

<form method = 'post' role = 'form'>
    <input type="text" name="q" value="">
    <input type="submit" value="Search Google">
</form>

        <script>
            
        </script>

       

    </body>

</html>
